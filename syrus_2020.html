<!DOCTYPE html>
<html>
<head>
	<title>Expresstcha</title>
	<script  src="face-api.min.js"></script>
	<script src="./script.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Fredoka+One|Ropa+Sans&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
	<!--link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"-->
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Architects+Daughter|Roboto&subset=latin,devanagari">
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>	
	<script  src="face-api.min.js"></script>
  	<script type="module" src="./script.js"></script>
	<script src="https://code.responsivevoice.org/responsivevoice.js?key=Rt3h6gSx"></script>
	<script>
		// const canvas = document.getElementById('canvas');
		// var videoElement = document.querySelector("#videoElement");
		var emotions = ["Happy","Angry","Sad"];
		var emotion = '';

		window.onload = function() {
				make_string();
			    // responsiveVoice.speak(document.getElementById("instruction_string").innerHTML); 
		}
		function timeout(){
        detect();
        setTimeout(timeout,5000);
        }
		function make_string() {
			var x = Math.floor(Math.random() * 3);
			emotion = emotions[x];
			var display_string = "Make a " + emotion + " Face. You have five seconds";
			document.getElementById("instruction_string").innerHTML = display_string;
			document.getElementById("downloaded_img").src="./static/" + emotion + ".jpg";
			responsiveVoice.speak(display_string);
			timeout();
		}
		var timeleft = 10;
		var downloadTimer = setInterval(function(){
 			if(timeleft <= 0){
  		  		clearInterval(downloadTimer);
  		  		document.getElementById("countdown").innerHTML = "Finished";
 			} 
 			else {
    	  		document.getElementById("countdown").innerHTML = timeleft + " seconds remaining";
  			}
 		  	timeleft -= 1;
		}, 1000);

		// if (navigator.mediaDevices.getUserMedia) {
		//   navigator.mediaDevices.getUserMedia({ videoElement: true })
			// .then(function (stream) {
			//   videoElement.srcObject = stream;
			//   take_snap();
			// })
			// .catch(function (err0r) {
			//   console.log("Something went wrong!");
		//     });
		// }

		// function stop(e) {
		//   var stream = videoElement.srcObject;
		//   var tracks = stream.getTracks();

		//   for (var i = 0; i < tracks.length; i++) {
		//     var track = tracks[i];
		//     track.stop();
		//   }

			//   videoElement.srcObject = null;
		// }
		// function take_snap(){
		// 	var context = canvas.getContext('2d');
		// 	context.drawImage(videoElement, 0, 0, 640, 480);
		// 	setTimeout(take_snap, 2000);

	<script src="https://code.responsivevoice.org/responsivevoice.js?key=Rt3h6gSx"></script>		
</head>
<style>
html, body{
width: 100%;
height: 100%;
}

body {
  display: flex;
  min-height: 100vh;
  flex-direction: column;
} 

main {
  flex: 1 0 auto;
}

h1.title,
.footer-copyright a {
  font-family: 'Architects Daughter', cursive;
  text-transform: uppercase;
  font-weight: 900;
}

/* start welcome animation */

body.welcome {
  background: #512da8;
  overflow: hidden;
  -webkit-font-smoothing: antialiased;
}

.welcome .splash {
  height: 0px;
  padding: 0px;
  border: 130em solid #039be5;
  position: fixed;
  left: 50%;
  display: block;
  box-sizing: initial;
  overflow: hidden;

  border-radius: 50%;
  transform: translate(-50%, -50%);
  animation: puff 0.5s 1.8s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards, borderRadius 0.2s 2.3s linear forwards;
}

.welcome #welcome {
  background: #311b92 ;
  width: 56px;
  height: 56px;
  position: absolute;
  left: 50%;
  top: 50%;
  overflow: hidden;
  opacity: 0;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  animation: init 0.5s 0.2s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards, moveDown 1s 0.8s cubic-bezier(0.6, -0.28, 0.735, 0.045) forwards, moveUp 1s 1.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards, materia 0.5s 2.7s cubic-bezier(0.86, 0, 0.07, 1) forwards, hide 2s 2.9s ease forwards;
}
   
/* moveIn */
.welcome header,
.welcome a.btn {
  opacity: 0;
  animation: moveIn 2s 3.1s ease forwards;
}

@keyframes init {
  0% {
    width: 0px;
    height: 0px;
  }
  100% {
    width: 56px;
    height: 56px;
    margin-top: 0px;
    opacity: 1;
  }
}

@keyframes puff {
  0% {
    top: 100%;
    height: 0px;
    padding: 0px;
  }
  100% {
    top: 50%;
    height: 100%;
    padding: 0px 100%;
  }
}

@keyframes borderRadius {
  0% {
    border-radius: 50%;
  }
  100% {
    border-radius: 0px;
  }
}

@keyframes moveDown {
  0% {
    top: 50%;
  }
  50% {
    top: 40%;
  }
  100% {
    top: 100%;
  }
}

@keyframes moveUp {
  0% {
    background: #311b92;
    top: 100%;
  }
  50% {
    top: 40%;
  }
  100% {
    top: 50%;
    background: #039be5;
  }
}

@keyframes materia {
  0% {
    background: #039be5;
  }
  50% {
    background: #039be5;
    top: 26px;
  }
  100% {
    background: #311b92;
    width: 100%;
    height: 64px;
    border-radius: 0px;
    top: 26px;
  }
}

@keyframes moveIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@keyframes hide {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
} 


.blink {
      animation: blink 2s steps(5, start) infinite;
      -webkit-animation: blink 1s steps(5, start) infinite;
    }
    @keyframes blink {
      to {
        visibility: hidden;
      }
    }
    @-webkit-keyframes blink {
      to {
        visibility: hidden;
      }
    }
#instruction_string {
	padding-left: 20px;
	font-size: 25px;
    font-family: 'Ropa Sans', sans-serif; 
}
#downloaded_img {
	display: block;
	width: 90%;
	height: 375px;
	margin-left: auto;
	margin-right: auto;
}
#shadow1 {
    border-radius: 25px;
  	padding: 10px;
  	box-shadow: 10px 10px 18px #888888;
}
#container {
	margin: 0px auto;
	width: 80%;
	height: 375px;
	border: 5px #333 solid;
}
#videoElement {
	width: 100%;
	height: 375px;
}
#message {
	padding-top: 25px;
	font-family: 'Ropa Sans', sans-serif; 
}
.flex-container {
  display: flex;
  background-color: DodgerBlue;
  padding-left: 0px;
  padding-right: 0px;
}

.flex-container > div {
  background-color: #7cb9e8;
  margin: 10px;
  width: 60%;
  padding: 20px;
  font-size: 30px;
}
@font-face {
  font-family: 'MyWebFont';
  src: url('webfont.eot'); /* IE9 Compat Modes */
  src: url('webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
       url('webfont.woff2') format('woff2'), /* Super Modern Browsers */
       url('webfont.woff') format('woff'), /* Pretty Modern Browsers */
       url('webfont.ttf')  format('truetype'), /* Safari, Android, iOS */
       url('webfont.svg#svgFontName') format('svg'); /* Legacy iOS */
}
body {
  font-family: 'Fredoka One', cursive;
  background-color: red; /* For browsers that do not support gradients */
  background-image: linear-gradient(DodgerBlue, #808080);
}
</style>

<body style="background-color: #3090C7;" class="welcome">

    <!-- Splash Screen -->
  <span id="splash-overlay" class="splash"></span>
  <span id="welcome" class="z-depth-4"></span>
 
  <header class="navbar-fixed"> 
    <nav class="row deep-purple darken-3" style="height: 120px;">
      <div style="color:white;"><h2 align="center">
		Expresstcha
	</h2></div>
    </nav>
  </header>

  <div style="padding-top: 100px;">
  <main class="valign-wrapper">
    <span class="container grey-text text-lighten-1 ">

	<div id="message" ><h4>
		<div align="center" style="color:white;padding-left: 5px; padding-top: 60px;"><i class="fa fa-bell blink" aria-hidden="true" style="color:#ffcc33"></i>Please confirm that you're a human</div></h4></div>

	<div><p style="color:white" id="instruction_string"></p><i class="fa fa-refresh" onclick="make_string()" style="font-size: 40px;color:green;" aria-hidden="true"><div id="countdown"></div></i> </div> 

<!-- =======
	</h1></div>
	<h1 id='json'></h1>
	<div id="message" align="center"><h4><i class="fa fa-bell blink" aria-hidden="true"></i>    Please confirm that you're a human </h4></div>

	<p id="instruction_string"></p>
	<i class="fa fa-refresh" id="refresh" onclick='make_string()' style="font-size:44px" aria-hidden="true" style="color:green;"></i> 
>>>>>>> 59e9e8237d1d17ae2a075b8a2ac88bfb9e1ef627
 -->	<div class="flex-container">
  		<div id="shadow1" >
			<img id="downloaded_img" style="height: 370px" alt="demo_expression"></img>
  		</div>
  		<div id="shadow1" >
  			<div id="container">
				<video autoplay="true" id="videoElement">
				</video>							
			</div>
		</div>
	</div>      
    </span>
  </main>
  </div>
    <!-- Splash Screen ends -->
<!-- <body>
	<div class="controller">
		<h1 align="center">Expresstcha</h1>
		<h3> Confirm you're a human </h3>
		<p id="instruction_string"></p><i class="fa fa-refresh" onclick="make_string()" aria-hidden="true" style="color:green;"></i> 
		<div class="flex-container">
			<div>
				<img id="downloaded_img" alt="demo_expression"></img>
 
			</div>
			<div>
				<div id="container">
					<video width="720" height="560" autoplay muted id="videoElement" ></video>
				</div>
			</div>
		</div>
<<<<<<< HEAD
	    <i class="fa fa-stop" onclick="stop()" aria-hidden="true" style="color:red;"></i>
-->

</body>
</html>
